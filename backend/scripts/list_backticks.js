const fs=require('fs');const path=require('path');const p=path.join(__dirname,'..','src','routes','requests.js');const s=fs.readFileSync(p,'utf8');let inSingle=false,inDouble=false,inBack=false,esc=false,line=1;const positions=[];for(let i=0;i<s.length;i++){const ch=s[i];if(ch==='\n')line++;if(!inSingle && !inDouble && !inBack && ch==='/'){const n=s[i+1]||''; if(n==='/' ){ while(i<s.length && s[i] !== '\n') i++; continue; } if(n==='*'){ i+=2; while(i<s.length && !(s[i]==='*' && s[i+1]==='/')){ if(s[i]==='\n')line++; i++; } i+=1; continue; }}
if(!inSingle && !inDouble && !inBack && ch==="'"){inSingle=true; esc=false; continue;} if(inSingle){ if(ch==='\\' && !esc) esc=true; else if(ch==="'" && !esc){ inSingle=false;} else esc=false; continue; }
if(!inSingle && !inDouble && !inBack && ch==='"'){inDouble=true; esc=false; continue;} if(inDouble){ if(ch==='\\' && !esc) esc=true; else if(ch==='"' && !esc){ inDouble=false;} else esc=false; continue; }
if(!inSingle && !inDouble && !inBack && ch==='`'){ inBack=true; positions.push({type:'open',pos:i,line}); esc=false; continue;} if(inBack){ if(ch==='\\' && !esc) esc=true; else if(ch==='`' && !esc){ inBack=false; positions.push({type:'close',pos:i,line}); } else esc=false; continue; }}
console.log('backtick events:', positions.length); for(const e of positions){console.log(e.type, 'line', e.line);}